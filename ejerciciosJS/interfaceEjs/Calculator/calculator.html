<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" value="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link rel="stylesheet" href="calculator.css">
</head>
<body>
    <h1>Calculator</h1>
    <section class="calculator">
        <section id="screen">
            <output id="operation" class="operation">0</output>
            <output id="currentNumber" class="currentNumber">0</output>
        </section>
        <section id="keyboard">
            <input type="text" id="ce" class="key" value="">
            <!-- <input type="text" id="ce" class="key" value="CE"> -->
            <input type="text" id="c" class="key" value="C">
            <input type="text" id="clearOne" class="key" value="<==">
            <input type="text" class="key operator" value="/">
            <input type="text" class="key number" value="7">
            <input type="text" class="key number" value="8">
            <input type="text" class="key  number" value="9">
            <input type="text" class="key operator" value="*">
            <input type="text" class="key  number" value="4">
            <input type="text" class="key  number" value="5">
            <input type="text" class="key  number" value="6">
            <input type="text" class="key operator" value="-">
            <input type="text" class="key  number" value="1">
            <input type="text" class="key  number" value="2">
            <input type="text" class="key  number" value="3">
            <input type="text" class="key operator" value="+">
            <!-- TODO: <input type="text" id="changeSign" class="key" value="+/-"> -->
            <input type="text" id="changeSign" class="key" value="">
            <input type="text" class="key  number" value="0">
            <input type="text" id="comma" class="key" value=",">
            <input type="text" class="key operator" value="=">
        </section>
    </section>
    <!-- <script type="module">
        import Calculator from './calculator.js';
    </script> -->
    <script src="./calculator.js"></script>
    <script>
        (function() {
            const operation = document.querySelector('#operation');
            const currentNumber = document.querySelector('#currentNumber');
            const clearAll = document.querySelector('#c');
            const clearNumber = document.querySelector('#ce');
            const clearOne = document.querySelector('#clearOne');
            const commaSign = document.querySelector('#comma');
            const changeSign = document.querySelector('#changeSign');
            let calculator = new Calculator(
                (value => operation.textContent = value.replace(/\./, ',')),
                (value => currentNumber.textContent = value.replace('/\./', ','))
            );
            document.querySelectorAll('.number').forEach(keyNumber => keyNumber.addEventListener('click', ev => {
                calculator.introduceNumber(ev.target.value);
                calculator.printVars();
                })
            );
            document.querySelectorAll('.operator').forEach(keyOperator => keyOperator.addEventListener('click', ev => {
                calculator.introduceOperator(ev.target.value);
                calculator.printVars();
            }));
            clearAll.addEventListener('click', ev => {
                calculator.clearOperation();
            });
            commaSign.addEventListener('click', ev => {
                calculator.introduceCommaSign();
            });
            /* TODO:
            clearOne.addEventListener('click', ev => {
                calculator.clearOne();
            });
            changeSign.addEventListener('click', ev => {
                calculator.changeSign();
            });
            */
        })();
    </script>
</body>
</html>